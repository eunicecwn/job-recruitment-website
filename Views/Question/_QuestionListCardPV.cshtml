@model IPagedList<JobRecruitment.Models.QuestionSet>
@using X.PagedList
@using X.PagedList.Mvc.Core

<link rel="stylesheet" href="~/css/jobForm.css">

<div class="row">
    @foreach (var questionSet in Model)
    {
        var statusClass = questionSet.IsActive ? "badge bg-success status-badge" : "badge bg-secondary status-badge";
        var toggleBtnClass = questionSet.IsActive ? "btn btn-sm btn-outline-warning" : "btn btn-sm btn-outline-success";
        var toggleBtnIcon = questionSet.IsActive ? "fa-toggle-on" : "fa-toggle-off";
        var toggleBtnText = questionSet.IsActive ? "Deactivate" : "Activate";

        <div class="col-md-6 col-lg-4 mb-4">
            <div class="card h-100 question-set-card">
                <div class="card-body d-flex flex-column">
                    <div class="d-flex justify-content-between align-items-start mb-2">
                        <h5 class="card-title" title="@questionSet.Name">@questionSet.Name</h5>
                        <span class="@statusClass">
                            @(questionSet.IsActive ? "Active" : "Inactive")
                        </span>
                    </div>
                    <div class="question-set-meta-item">
                        <i class="fas fa-layer-group"></i>
                        <span>@questionSet.Questions.Count Questions</span>
                    </div>
                    <div class="question-set-meta-item">
                        <i class="fas fa-briefcase"></i>
                        <span>@questionSet.Jobs.Count Jobs Assigned</span>
                    </div>
                    @if (!string.IsNullOrEmpty(questionSet.Description))
                    {
                        var description = questionSet.Description.Length > 100 ?
                        questionSet.Description.Substring(0, 100) + "..." : questionSet.Description;
                        <div class="question-set-description mt-2">
                            <small class="text-muted" title="@questionSet.Description">
                                @description
                            </small>
                        </div>
                    }
                    <div class="question-set-date mt-auto pt-3">
                        <small class="text-muted">
                            Created: @questionSet.CreatedDate.ToString("yyyy-MM-dd")<br>
                            ID: @questionSet.Id
                        </small>
                    </div>
                </div>
                <div class="card-footer bg-transparent">
                    <div class="d-flex gap-2">
                        <a asp-controller="Question" asp-action="Details" asp-route-id="@questionSet.Id"
                           class="btn btn-outline-primary btn-sm flex-grow-1">View Details</a>
                        <button class="@toggleBtnClass toggle-status-btn"
                                data-id="@questionSet.Id"
                                data-status="@questionSet.IsActive.ToString().ToLower()">
                            <i class="fas @toggleBtnIcon"></i> @toggleBtnText
                        </button>
                    </div>
                </div>
            </div>
        </div>
    }
</div>